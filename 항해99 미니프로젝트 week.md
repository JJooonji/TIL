# 2022.08.12 ~ 2022.08.18 미니프로젝트

## 주제
### > 프로젝트 이름 : 픽카(PickCar)
### > 프로젝트 설명 : 중고차 구매를 위한 고민 공유와 댓글을 통한 의견 공유 페이지
### > [미니프로젝트 6조 노션](https://www.notion.so/6-SA-005cfb64db044e4490e5d5e71796f272)
---
## 팀원 정보
![팀원정보](https://user-images.githubusercontent.com/107025988/188275925-033a77f6-f5dd-40ec-8ba1-cdd7aee815b5.png)

---
## Backend 기술 스택
- express
- mysql
- sequelize
- jsonwebtoken
---
## 구현 기능
### - 게시글 CRUD
### - 서버 배포 및 관리
### - 깃 레포지토리 관리
### - 추후 코드 정리

   - timestamp의 기준이 UTC 시간 기준으로 되어있는 점을 확인
     - config.json에 아래 코드 작성하여 한국시간 기준으로 변경 

```
   "timezone":"+09:00",            
    "dialectOptions":{
      "dateStrings":true,            
      "typeCast":true
    }
```
<br>

   - 댓글 조회 사용자 인증 삭제
      - 프론트 쪽에서 댓글 조회부분이 사용자 인증없이 사용 가능하도록 요청
      - routes/comment.js에서 댓글 조회 코드에서 사용자 미들웨어를 삭제 <br>-> 하지만, 서버가 여전히 사용자 인증이 필요하다고 동작하고 있었음.
      - 다시 확인해보니 routes/index.js에 작성한 경로에서 사용자 인증 미들웨어가 적용되어 있음을 확인하여 index에 적용해놓은 미들웨어를 삭제한 후, comment.js에 사용자 인증을 해야하는 곳에 사용자 인증 미들웨어를 작성하여 완성함.     
<br>

   - api에 작성한 에러메세지와 다르게 작성된 부분 메세지 통일하였음.

---
## 트러블슈팅
### - 로그인 토큰 값
- 백에서 쿠키에 담아서 보내는 토큰값을 프론트에서 가져오지 못하고 있는 상황을 발견<br>
 -> 해당 부분은 같은 반 백엔드 분들과 각자 해당일까지 있었던 문제점들에 대해 이야기를 나누던 중 해결방법을 찾을 수 있었음.
<br> -> 백에서 토큰을 쿠키가 아닌 헤더에 보내는 방식으로 변경하고, 프론트쪽에서도 토큰을 받아서 저장하고 삭제하는 방법을 useCookies 사용해서 해결

<br>

### - nickname 당 1개의 게시글과 댓글밖에 작성이 안됨.
- nickname unique문제
<br>->  user, post, comment 모두 models에서 nickname에 unique를 걸었더니 발생한 문제로 unique 삭제 후 테이블 삭제 후 재생성해서 테스트해보니 해결되었음.

<br>

### - 서버연결 후 포스트맨으로 데이터를 넣어봤지만, 오류 발생
- users 모델에 userId가 autoIncrement되어 있지 않았던 문제였던 것으로 판단하여 코드 수정 후 다시 서버 연결하여 확인해보니 해결되었음.

### - 서버 연결 오류 
- timestamps 기준 변경 후 서버 재연결을 위해 git bash 작동 중 config.json 파일 오류로 서버가 연결되지 않았음<br>-> config.json 파일 안에 들어갈 코드 미비로 연결이 되지않았고, vim config.json 안에 전체 코드 붙여넣은 후 서버가 잘 구동되었음.

<br>

### - 사용자 인증 미들웨어 오류
- 사용자 인증 미들웨어를 적용하지 않은 게시글, 댓글 조회 구현 시 '로그인 후 사용해주세요' 에러 발생
  - routes/index.js에 /posts 경로에 auth-middleware가 거치도록 진행한 상태에서, 게시글 조회 부분이 /posts로 진입하기 때문에 auth-middleware를 거치면서 발생된 문제.
  <br>->  routes/index.js에 /posts 경로에 auth-middleware를 제거하고 routes/post.js에 인증 미들웨어를 거쳐야 하는 부분에만 auth-middleware를 거치도록 수정하여 해결되었음.

<br>

### - 최종 프론트 서버 배포 오류
- s3로 프론트 서버를 배포했을 때, 404에러가 뜨거나 화면이 제대로 구현되지 않는 문제가 발생함. <br>-> s3가 아닌 ec2로 연결하는 방식으로 변경하여 서버 배포를 완료하였음.

<br>

---
## <미니프로젝트주차 회고>
#### 주특기 주차를 지난 후 프로젝트 주차가 시작되었다..! 
#### 백과 프론트과 처음 해보는 협업이였기에 긴장이 되었는데, 팀장까지 맡게되어 잘할 수 있을지 많이 부담이 되었다ㅠ
#### 하지만, 좋은 팀원들을 만나 함께 의견을 조율해가며 주제도 정하고 기본적으로 기능할 구현들을 정리하였다.
#### 백엔드 팀원들과 함께 회의를 하며 api도 정리하고, 깃 허브 오류를 줄이기 위해 한명씩 돌아가면서 repo를 만들고 pull request - merge의 과정을 반복해보며 깃 허브 사용에 익숙해질 수 있었다.
#### 백엔드 3명 모두 야자반 멤버여서 세명 모두 우리가 잘해내갈 수 있을지 걱정이 앞섰다.. 하지만, 함께 천천히 만들어간다면 안될 것도 없기에!! 다같이 만들어가자고 이야기를 했고, 그 후로 모델 생성 및 깃 허브 연습부터 마지막 서버 배포 및 관리까지 공유 화면을 띄워놓고 함께 해나갔다~!
#### 이러한 과정에서 새로 알게된 git bash 서버 배포 및 관리방법도 메모장에 따로 정리하여 팀원들에게 공유하며 함께 성장해나가고자 하였다!
#### 사실 주특기 주차를 지나오면서 '내가 잘할 수 있을까..'라는 고민이 많이 들었었다. 그래서 의기소침해지기도 했는데, 미니프로젝트 팀원들과 함께 만들어 갔던 프로젝트의 과정이 너무 즐거웠고, 이전 주차들을 거쳐오면서 성장한 부분들을 프로젝트에 적용할 수 있어서 뿌듯함도 느껴졌다~! 이래서 코딩의 즐거움에 빠지나 싶었다!ㅎㅎㅎ
#### 처음 해보는 협업과 프로젝트에 어려움도 있긴 했지만, 모두가 함께 고민하고 노력하니 해결안되는 부분은 없었고, 프로젝트 완성을 위해 모두가 최선을 다했던 한주가 되었던 것 같다.
### `미니프로젝트 주차에서 가장 크게 얻은 것은 함께 해나간다면 뭐든 해결할 수 있을 것이라는 자신감이었고, 이러한 자신감이 멘탈이 약해졌던 나를 강하게 만들어 주었다. 앞으로 항해를 해나가는데에 다시 한번 마음가짐을 다질 수 있었던 뜻깊었던 주차였다!`